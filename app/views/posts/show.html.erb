<h1><%=@post.title%></h1>
<h2><%=@post.content%></h2>
<h4>categories:</h4>
    <% @post.categories.each do |category| %>
        <%= link_to category.name, category_path(category) %><br>
    <%end%><br>

<h4>comments:</h4> 
    <% @post.comments.each do |comment| %>
        <%= comment.content %> - <%= link_to comment.user.username, user_path(comment.user) %> 
    <%end%> 
        
    
<h4>Users who have commented on this post:</h4>
    <% @post.unique_users do |user| %>
        <%= link_to user.username, user_path(user) %> 
    <%end%> 

<h2>Comment:</h2>
    
<% form_for @post.comments.build do |f| %> 
    <%= f.hidden_field :post_id, value: @post.id %>
    <%= f.label :content %> 
    <%= f.text_area :content %> 
    <br>
    <%= f.collection_select :user_id, User.all, :id, :username, include_blank: "Choose a User" %> 
    <br> 
    Create User:
    <%= f.fields_for :user, @post.comments.last.build_user do |user_fields|%> 
    <br>
    Username: 
    <%= user_fields.text_field :username %> 
    Email: 
    <%= user_fields.text_field :email %> 
    <%end%> 

    <%= f.submit %> 
    <%end%> 

